webpackJsonp([0,4],{1093:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=1093},1094:function(t,e,n){t.exports=n(512)},174:function(t,e,n){"use strict";var r=n(0),s=n(238),o=n(290),i=(n.n(o),n(291));n.n(i);n.d(e,"a",function(){return l});var a=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t){this.http=t,this.loginUrl="/ajax/users/authentication/login",this.logoutUrl="/ajax/users/authentication/logout";var e=JSON.parse(localStorage.getItem("currentUser"));this.token=e&&e.token,this._baseUrl="",window.location&&"localhost"==window.location.hostname&&(this._baseUrl="http://docker.local:8088")}return t.prototype.isLoggedIn=function(){return Boolean(localStorage.getItem("currentUser"))},t.prototype.login=function(t){var e=this,n=JSON.stringify(t),r=new s.a({"Content-Type":"application/json"}),i=new s.b({headers:r}),a=this._baseUrl+this.loginUrl;return this.http.post(a,n,i).map(function(t){var n=t.json()&&t.json().body.token;return!!n&&(e.token=n,localStorage.setItem("currentUser",JSON.stringify({token:n})),!0)}).catch(function(t){return o.Observable.throw(t.json().error||"Server error")})},t.prototype.logout=function(){this.token=null,localStorage.removeItem("currentUser")},t=a([n.i(r.Injectable)(),c("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.c&&s.c)&&e||Object])],t);var e}()},390:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return i});var s=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(){}return t.prototype.ngOnInit=function(){},t=s([n.i(r.Component)({selector:"app-home",template:n(827),styles:[n(817)]}),o("design:paramtypes",[])],t)}()},391:function(t,e,n){"use strict";var r=n(0),s=n(68),o=n(28),i=n(174);n.d(e,"a",function(){return l});var a=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n){this.authService=t,this.router=e,this.fb=n,this.wait=!1}return t.prototype.ngOnInit=function(){this._initForm()},t.prototype._initForm=function(){this.loginForm=this.fb.group({email:["",o.Validators.required],password:["",o.Validators.required]})},t.prototype.onSubmit=function(t){var e=this,n=t.value,r=t.valid;this.wait=!0,this.error="",r&&this.authService.login(n).subscribe(function(t){t===!0?e.router.navigate(["/"]):(e.error="Username or Password is invalid",e.wait=!1)},function(t){e.error="An error occurred. Please try again.",e.wait=!1})},t=a([n.i(r.Component)({selector:"app-login",template:n(828),styles:[n(818)]}),c("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.a&&i.a)&&e||Object,"function"==typeof(l="undefined"!=typeof s.a&&s.a)&&l||Object,"function"==typeof(u="undefined"!=typeof o.FormBuilder&&o.FormBuilder)&&u||Object])],t);var e,l,u}()},392:function(t,e,n){"use strict";var r=n(0),s=n(68),o=n(93);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.us=t,this.router=e}return t.prototype.resolve=function(t){var e=this,n=t.params.id;return this.us.getUser(n).then(function(t){return t?t:(e.router.navigate([""]),!1)})},t=i([n.i(r.Injectable)(),a("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.a&&o.a)&&e||Object,"function"==typeof(c="undefined"!=typeof s.a&&s.a)&&c||Object])],t);var e,c}()},393:function(t,e,n){"use strict";var r=n(0),s=n(68),o=n(28),i=n(93),a=n(637);n.d(e,"a",function(){return u});var c=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n,r){this.usersService=t,this.route=e,this.router=n,this.fb=r,this.wait=!1,this.passWait=!1,this.showPasswordForm=!1,this.user=new a.a}return t.prototype.ngOnInit=function(){var t=this;this.route.data.forEach(function(e){void 0!==e.user&&e.user&&(t.user=e.user)}),this._initForms()},t.prototype._initForms=function(){this.userForm=this.fb.group({name:["",[o.Validators.required,o.Validators.minLength(3)]],email:["",o.Validators.required],role:["",o.Validators.required]}),this.passwordForm=this.fb.group({password:["",[o.Validators.required,o.Validators.minLength(3)]],confirm:["",o.Validators.required]}),this.user.id&&(this.userForm.controls.name.setValue(this.user.name),this.userForm.controls.email.setValue(this.user.email),this.userForm.controls.role.setValue(this.user.role.id))},t.prototype.onSubmit=function(t){var e=this,n=t.value,r=t.valid;if(this.wait=!0,this.msg=this.error="",r)return this.user.id?(n.id=this.user.id,this.usersService.updateUser(n).then(function(t){return e._handleResponse(t)}).catch(function(t){return e.error=t})):this.usersService.createUser(n).then(function(t){return e._handleResponse(t)}).catch(function(t){return e.error=t})},t.prototype._handleResponse=function(t){this.wait=!1,1==t.success?(this.msg="User record was successfully updated.","create"===t.method&&this.router.navigate(["/user/"+t.user.id])):this._handleError(t.error_message)},t.prototype.onSubmitChangepass=function(t){var e=this,n=t.value,r=t.valid;if(this.passWait=!0,this.passMsg=this.passError="",r)return this.usersService.changePassword(this.user.id,n.password).then(function(t){return e._handlePasswordResponse(t)}).catch(function(t){return e.passError=t})},t.prototype._handlePasswordResponse=function(t){this.passWait=!1,this.passwordForm.reset(),1==t.success?this.passMsg="User password successfully updated.":this.passError=t.error_message},t.prototype._handleError=function(t){this.error=t},t.prototype.togglePassword=function(){this.showPasswordForm=!this.showPasswordForm},t=c([n.i(r.Component)({selector:"app-user-edit",template:n(829),styles:[n(819)]}),l("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.a&&i.a)&&e||Object,"function"==typeof(u="undefined"!=typeof s.b&&s.b)&&u||Object,"function"==typeof(d="undefined"!=typeof s.a&&s.a)&&d||Object,"function"==typeof(f="undefined"!=typeof o.FormBuilder&&o.FormBuilder)&&f||Object])],t);var e,u,d,f}()},394:function(t,e,n){"use strict";var r=n(0),s=n(68),o=n(93),i=n(456);n.n(i);n.d(e,"a",function(){return l});var a=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n){var r=this;this.usersService=t,this.route=e,this.router=n,this.currentPage=1,this.pagesize=10,this.pages=[],this.wait=!1,this.sortCol="id",this.sortDir="desc",this.users$=this.usersService.users$.subscribe(function(t){return r.users=t}),this.total$=this.usersService.total$.subscribe(function(t){return r.total=t}),this.usersService.total$.subscribe(function(){return r._listUpdated()}),this.selectedUser=!1}return t.prototype.ngOnInit=function(){this._getUsers()},t.prototype.ngOnDestroy=function(){this.users$.unsubscribe(),this.total$.unsubscribe()},t.prototype._getUsers=function(){this.wait=!0,this.usersService.getUsers(this.pagesize,this.currentPage,this.sortCol,this.sortDir)},t.prototype._listUpdated=function(){this.wait=!1,this._setPagination()},t.prototype.getPageCount=function(){return Math.ceil(this.total/this.pagesize)},t.prototype._setPagination=function(){this.pages=[];for(var t=1;t<=this.getPageCount();t++)this.pages.push(t)},t.prototype.clickPage=function(t){this.currentPage=t,this._getUsers()},t.prototype.clickNext=function(){this.currentPage++,this._getUsers()},t.prototype.clickPrev=function(){this.currentPage--,this._getUsers()},t.prototype.sort=function(t){this.sortCol==t?this.sortDir="desc"==this.sortDir?"asc":"desc":this.sortDir="asc",this.sortCol=t,this._getUsers()},t.prototype.clickDelete=function(t){this.selectedUser=t,this.confirmDeleteModal.show()},t.prototype.cancelDelete=function(){this.confirmDeleteModal.hide()},t.prototype.confirmDelete=function(t){var e=this;this.confirmDeleteModal.hide(),this.wait=!0,this.usersService.deleteUser(this.selectedUser).then(function(t){return e._handleResponse(t)}).catch(function(t){return e.error=t})},t.prototype._handleResponse=function(t){this._getUsers(),this.wait=!1,0==t.success&&(this.error=t.error_message)},a([n.i(r.ViewChild)("confirmDeleteModal"),c("design:type","function"==typeof(e="undefined"!=typeof i.ModalDirective&&i.ModalDirective)&&e||Object)],t.prototype,"confirmDeleteModal",void 0),t=a([n.i(r.Component)({selector:"app-user-list",template:n(831),styles:[n(821)]}),c("design:paramtypes",["function"==typeof(l="undefined"!=typeof o.a&&o.a)&&l||Object,"function"==typeof(u="undefined"!=typeof s.b&&s.b)&&u||Object,"function"==typeof(d="undefined"!=typeof s.a&&s.a)&&d||Object])],t);var e,l,u,d}()},395:function(t,e,n){"use strict";var r=n(0),s=n(93);n.d(e,"a",function(){return a});var o=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t){var e=this;this.usersService=t,this.userID=null,this.pageSize=10,this.currentPage=1,this.sortCol="id",this.sortDir="desc",this.pages=[],this.events$=this.usersService.events$.subscribe(function(t){return e.events=t}),this.usersService.events$.subscribe(function(){return e.wait=!1}),this.eventsTotal$=this.usersService.eventsTotal$.subscribe(function(t){return e.eventsTotal=t}),this.usersService.eventsTotal$.subscribe(function(){return e._setPages()})}return t.prototype.sort=function(t){this.sortCol!=t&&(this.sortCol=t),this.sortDir="desc"===this.sortDir?"asc":"desc",this._getEvents()},t.prototype._getEvents=function(){this.wait=!0,this.usersService.getUsersEvents(this.userID,this.pageSize,this.currentPage,this.sortCol,this.sortDir)},t.prototype._setPages=function(){this.pages=[];for(var t=1;t<=this.getPageCount();t++)this.pages.push(t)},t.prototype.clickPage=function(t){this.currentPage=t,this._getEvents()},t.prototype.clickPrev=function(){this.currentPage>1&&this.currentPage--,this._getEvents()},t.prototype.clickNext=function(){this.currentPage<this.getPageCount()&&this.currentPage++,this._getEvents()},t.prototype.getPageCount=function(){return Math.ceil(this.eventsTotal/this.pageSize)},t.prototype.ngOnInit=function(){this._getEvents()},t.prototype.ngOnDestroy=function(){this.events$.unsubscribe(),this.eventsTotal$.unsubscribe()},t=o([n.i(r.Component)({selector:"app-users-event-log",template:n(832),styles:[n(822)],providers:[s.a]}),i("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.a&&s.a)&&e||Object])],t);var e}()},511:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=511},512:function(t,e,n){"use strict";var r=n(640),s=(n.n(r),n(602)),o=n(0),i=n(639),a=n(632);i.a.production&&n.i(o.enableProdMode)(),n.i(s.a)().bootstrapModule(a.a)},631:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return i});var s=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(){this.title="User Admin"}return t=s([n.i(r.Component)({selector:"app-root",template:n(825),styles:[n(823)]}),o("design:paramtypes",[])],t)}()},632:function(t,e,n){"use strict";var r=n(171),s=n(0),o=n(28),i=n(238),a=n(631),c=n(633),l=n(174),u=n(93),d=n(392),f=n(391),p=n(390),h=n(394),v=n(393),g=n(634),b=n(456),m=(n.n(b),n(636)),y=n(638),w=n(395);n.d(e,"a",function(){return j});var _=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},x=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},j=function(){function t(){}return t=_([n.i(s.NgModule)({declarations:[a.a,h.a,v.a,p.a,g.a,f.a,m.a,y.a,w.a],imports:[r.b,o.FormsModule,o.ReactiveFormsModule,i.d,c.a,b.AlertModule.forRoot(),b.ModalModule.forRoot()],providers:[l.a,u.a,d.a],bootstrap:[a.a]}),x("design:paramtypes",[])],t)}()},633:function(t,e,n){"use strict";var r=n(0),s=n(68),o=n(391),i=n(390),a=n(394),c=n(393),l=n(395),u=n(635),d=n(392);n.d(e,"a",function(){return v});var f=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=[{path:"list",canActivate:[u.a],component:a.a},{path:"events",canActivate:[u.a],component:l.a},{path:"user",canActivate:[u.a],component:c.a},{path:"user/:id",component:c.a,canActivate:[u.a],resolve:{user:d.a}},{path:"",canActivate:[u.a],component:i.a},{path:"login",component:o.a},{path:"**",redirectTo:""}],v=function(){function t(){}return t=f([n.i(r.NgModule)({imports:[s.c.forRoot(h,{useHash:!1})],exports:[s.c],providers:[u.a]}),p("design:paramtypes",[])],t)}()},634:function(t,e,n){"use strict";var r=n(0),s=n(68),o=n(174);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.ngOnInit=function(){},t.prototype.isLoggedIn=function(){return this.authService.isLoggedIn()},t.prototype.clickLogout=function(){this.authService.logout(),this.router.navigate(["/login"])},t=i([n.i(r.Component)({selector:"app-header",template:n(826),styles:[n(816)]}),a("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.a&&o.a)&&e||Object,"function"==typeof(c="undefined"!=typeof s.a&&s.a)&&c||Object])],t);var e,c}()},635:function(t,e,n){"use strict";var r=n(0),s=n(68);n.d(e,"a",function(){return a});var o=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t){this.router=t}return t.prototype.canActivate=function(){return!!localStorage.getItem("currentUser")||(this.router.navigate(["/login"]),!1)},t=o([n.i(r.Injectable)(),i("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.a&&s.a)&&e||Object])],t);var e}()},636:function(t,e,n){"use strict";var r=n(0),s=n(28);n.d(e,"a",function(){return c});var o=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},c=function(){function t(t){this.validateEquality=t}return t.prototype.validate=function(t){var e=t.value,n=t.parent.controls[this.validateEquality];return n&&e!==n.value?{validateEquality:!1}:null},t=o([n.i(r.Directive)({selector:"[validateEquality][formControlName],[validateEquality][formControl],[validateEquality][ngModel]",providers:[{provide:s.NG_VALIDATORS,useExisting:n.i(r.forwardRef)(function(){return t}),multi:!0}]}),a(0,n.i(r.Attribute)("validateEquality")),i("design:paramtypes",[String])],t)}()},637:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){}return t}()},638:function(t,e,n){"use strict";var r=n(0),s=n(93),o=n(68);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){var n=this;this.usersService=t,this.route=e,this.pageSize=null,this.pageNumber=null,this.sortCol=null,this.sortDir="desc",this.events$=this.usersService.events$.subscribe(function(t){return n.events=t}),this.usersService.events$.subscribe(function(){return n.wait=!1})}return t.prototype._getEvents=function(){this.wait=!0,this.usersService.getUsersEvents(this.userID,this.pageSize,this.pageNumber,this.sortCol,this.sortDir)},t.prototype.sort=function(t){this.sortCol==t?this.sortDir="desc"==this.sortDir?"asc":"desc":this.sortDir="asc",this.sortCol=t,this._getEvents()},t.prototype.ngOnInit=function(){var t=this;this.route.data.forEach(function(e){void 0!==e.user&&e.user&&(t.userID=e.user.id)}),this._getEvents()},t.prototype.ngOnDestroy=function(){this.events$.unsubscribe()},t=i([n.i(r.Component)({selector:"app-user-event-log",template:n(830),styles:[n(820)],providers:[s.a]}),a("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.a&&s.a)&&e||Object,"function"==typeof(c="undefined"!=typeof o.b&&o.b)&&c||Object])],t);var e,c}()},639:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={production:!0}},640:function(t,e,n){"use strict";var r=n(654),s=(n.n(r),n(647)),o=(n.n(s),n(643)),i=(n.n(o),n(649)),a=(n.n(i),n(648)),c=(n.n(a),n(646)),l=(n.n(c),n(645)),u=(n.n(l),n(653)),d=(n.n(u),n(642)),f=(n.n(d),n(641)),p=(n.n(f),n(651)),h=(n.n(p),n(644)),v=(n.n(h),n(652)),g=(n.n(v),n(650)),b=(n.n(g),n(655)),m=(n.n(b),n(1092));n.n(m)},816:function(t,e){t.exports=""},817:function(t,e){t.exports=""},818:function(t,e){t.exports=""},819:function(t,e){t.exports="#user-edit .form-group p{margin-bottom:0;padding-top:11px}\n"},820:function(t,e){t.exports=""},821:function(t,e){t.exports="\n"},822:function(t,e){t.exports=""},823:function(t,e){t.exports=""},825:function(t,e){t.exports='<br />\n<app-header></app-header>\n<div class="page-content">\n    <router-outlet></router-outlet>\n</div>\n'},826:function(t,e){t.exports='<nav class="navbar navbar-inverse"> \n    <div class="container-fluid"> \n        <div class="navbar-header"> \n            <button type="button" class="collapsed navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-9" aria-expanded="false"> \n                <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> \n            </button> \n            <a href="#" class="navbar-brand">User Admin</a> \n        </div> \n        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-9"> \n            <ul class="nav navbar-nav" *ngIf="isLoggedIn()"> \n                <li>\n                    <a routerLink="/" routerLinkActive="active">Home</a>\n                </li> \n                <li>\n                    <a routerLink="/list" routerLinkActive="active">User List</a>\n                </li>\n                <li>\n                    <a routerLink="/events" routerLinkActive="active">Users Event Log</a>\n                </li>  \n                <li>\n                    <a (click)="clickLogout()">Logout</a>\n                </li> \n            </ul> \n        </div> \n    </div> \n</nav>\n'},827:function(t,e){t.exports='<div class="row">\n    <div class="col-xs-12">\n        <h1>Welcome to the Erdiko User Admin</h1>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <br />\n    </div>\n</div>\n<div class="row">\n    <div class="col-sm-6 col-xs-12">\n        <ul class="list-group">\n            <li class="list-group-item">\n                <a routerLink="/user/">Create a User</a>\n            </li>\n            <li class="list-group-item">\n                <a routerLink="/list">User List</a>\n            </li>\n            <li class="list-group-item">\n                <a routerLink="/events">User Event Log</a>\n            </li> \n        </ul>\n    </div>\n</div>\n'},828:function(t,e){t.exports='<div class="row">\n    <div class="col-xs-12">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                Login\n            </div>\n            <div class="panel-body">\n\n                <alert *ngIf="error" type="danger">{{ error }}</alert>\n\n                <form \n                        id="user-edit" \n                        class="form-horizontal"\n                        novalidate \n                        (ngSubmit)="onSubmit(loginForm)" \n                        [formGroup]="loginForm"\n                    >\n\n                    <div class="form-group">\n                        <label for="email" class="col-xs-2 control-label">Email</label>\n                        <div class="col-xs-10">\n                            <input type="email" class="form-control" name="email" \n                                    formControlName="email" placeholder="Email"\n                                    pattern="^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$">\n                            <div class="text-danger" *ngIf="loginForm.get(\'email\').hasError(\'required\') && loginForm.get(\'email\').touched">\n                              Email is required\n                            </div>\n                            <div class="text-danger" *ngIf="loginForm.get(\'email\').hasError(\'pattern\') && loginForm.get(\'email\').touched">\n                              A Valid email is required\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label for="password" class="col-xs-2 control-label">Password</label>\n                        <div class="col-xs-10">\n                            <input type="password" class="form-control" name="password" \n                                    formControlName="password" placeholder="Password">\n                            <div class="text-danger" *ngIf="loginForm.get(\'password\').hasError(\'required\') && loginForm.get(\'password\').touched">\n                              Password is required.\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <div class="col-xs-offset-2 col-xs-4">\n                            <button type="submit" class="btn btn-success" [disabled]="loginForm.invalid || wait">\n                                Submit\n                                <i *ngIf="wait" class="fa fa-refresh fa-spin fa-fw"></i> \n                            </button>\n                        </div>\n                    </div>\n                </form>\n\n            </div>\n        </div>\n    </div>\n</div>\n'},829:function(t,e){t.exports='<div class="row">\n    <div class="col-xs-12">\n        <button class="btn btn-info btn-sm" routerLink="/list/"><i class="fa fa-chevron-left" aria-hidden="true"></i> Back to User List</button>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <br/>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <span *ngIf="!user.id">Create User</span>\n                <span *ngIf="user.id">Edit User - User {{ user.id }}</span>\n            </div>\n            <div class="panel-body">\n\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="btn-group" role="group" aria-label="user-edit-actions" *ngIf="user.id">\n                          <button type="button" class="btn btn-sm btn-info" (click)="togglePassword()">Update Password</button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="col-xs-12">\n                        <br />\n                    </div>\n                </div>\n\n                <div class="row">\n                    <div class="col-xs-12">\n                        <div class="panel panel-default" *ngIf="showPasswordForm">\n                            <div class="panel-heading">\n                                <span>Update User Password</span>\n                            </div>\n                            <div class="panel-body">\n\n                                <alert *ngIf="passMsg" type="success">{{ passMsg }}</alert>\n                                <alert *ngIf="passError" type="danger">{{ passError }}</alert>\n\n                                <form \n                                        id="user-password-change" \n                                        class="form-horizontal"\n                                        novalidate \n                                        (ngSubmit)="onSubmitChangepass(passwordForm)" \n                                        [formGroup]="passwordForm"\n                                    >\n                                    <div class="form-group">\n                                        <p class="col-xs-12">Passwords must contain at least 1 alpha & 1 numeric character, with a minimum length of 5 characters</p>\n                                        <label for="password" class="col-xs-5 control-label">New Password</label>\n                                        <div class="col-xs-5">\n                                            <input  type="password" \n                                                    class="form-control" \n                                                    name="password" \n                                                    formControlName="password"\n                                                    pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{4,}$"\n                                                    required>\n                                            <div class="text-danger" *ngIf="passwordForm.get(\'password\').hasError(\'required\') && passwordForm.get(\'password\').touched">\n                                              Password is required\n                                            </div>\n                                        </div>\n                                    </div>\n                                   <div class="form-group">\n                                        <label for="password" class="col-xs-5 control-label">Confirm Password</label>\n                                        <div class="col-xs-5">\n\n                                            <input  type="password" \n                                                    class="form-control" \n                                                    name="confirm" \n                                                    formControlName="confirm"\n                                                    validateEquality="password" \n                                                    required>\n\n                                            <div class="text-danger" *ngIf="passwordForm.get(\'confirm\').hasError(\'required\') && passwordForm.get(\'confirm\').touched">\n                                              Password Confirm is required\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="form-group">\n                                        <div class="col-xs-offset-2 col-xs-4">\n                                            <button type="submit" class="btn btn-success" [disabled]="passwordForm.invalid || passWait">\n                                                Save\n                                                <i *ngIf="passWait" class="fa fa-refresh fa-spin fa-fw"></i> \n                                            </button>\n                                        </div>\n                                        <div class="col-xs-offset-2 col-xs-4">\n                                            <button type="cancel" class="btn btn-warning" (click)="togglePassword()">Cancel</button>\n                                        </div>\n                                    </div>\n                                </form>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <alert *ngIf="msg" type="success">{{ msg }}</alert>\n                <alert *ngIf="error" type="danger">{{ error }}</alert>\n\n                <form \n                        id="user-edit" \n                        class="form-horizontal"\n                        novalidate \n                        (ngSubmit)="onSubmit(userForm)" \n                        [formGroup]="userForm"\n                    >\n\n                    <div class="form-group" *ngIf="user && user.id">\n                        <label for="name" class="col-xs-2 control-label">ID</label>\n                        <div class="col-xs-10">\n                            <p>{{ user.id }}</p>\n                        </div>\n                    </div>\n                   <div class="form-group" *ngIf="user && user.created_at">\n                        <label for="name" class="col-xs-2 control-label">Joined</label>\n                        <div class="col-xs-10">\n                            <p *ngIf="!user.created_at">n/a</p>\n                            <p>{{ user.created_at }}</p>\n                        </div>\n                    </div>\n                    <div class="form-group" *ngIf="user.id">\n                        <label for="name" class="col-xs-2 control-label">Last Login</label>\n                        <div class="col-xs-10">\n                            <p *ngIf="!user.last_login">n/a</p>\n                            <p>{{ user.last_login }}</p>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="name" class="col-xs-2 control-label">Name</label>\n                        <div class="col-xs-10">\n                            <input type="text" class="form-control" name="name" formControlName="name" placeholder="Name">\n                            <div class="text-danger" *ngIf="userForm.get(\'name\').hasError(\'required\') && userForm.get(\'name\').touched">\n                              Name is required\n                            </div>\n                            <div class="text-danger" *ngIf="userForm.get(\'name\').hasError(\'minlength\') && userForm.get(\'name\').touched">\n                              Minimum of 2 characters\n                            </div>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="email" class="col-xs-2 control-label">Email</label>\n                        <div class="col-xs-10">\n                            <input type="email" class="form-control" name="email" \n                                    formControlName="email" placeholder="Email"\n                                    pattern="^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$">\n                            <div class="text-danger" *ngIf="userForm.get(\'email\').hasError(\'required\') && userForm.get(\'email\').touched">\n                              Email is required\n                            </div>\n                            <div class="text-danger" *ngIf="userForm.get(\'email\').hasError(\'pattern\') && userForm.get(\'email\').touched">\n                              A Valid email is required\n                            </div>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="role" class="col-xs-2 control-label">Role</label>\n                        <div class="col-xs-10">\n                            <select class="form-control" name="role" formControlName="role">\n                                <option value="2">Admin</option>\n                                <option value="1">User</option>\n                            </select>\n                            <div class="text-danger" *ngIf="userForm.get(\'role\').hasError(\'required\') && userForm.get(\'role\').touched">\n                              Role is required\n                            </div>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <div class="col-xs-offset-2 col-xs-4">\n                            <button type="submit" class="btn btn-success" [disabled]="userForm.invalid || wait">\n                                Save\n                                <i *ngIf="wait" class="fa fa-refresh fa-spin fa-fw"></i> \n                            </button>\n                        </div>\n                        <div class="col-xs-offset-2 col-xs-4">\n                            <button type="cancel" class="btn btn-warning" routerLink="/list/">Cancel</button>\n                        </div>\n                    </div>\n                </form>\n\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="row">\n    <div class="col-xs-12">\n        <br/>\n    </div>\n</div>\n\n<!-- User Event Component Goes Here -->\n<app-user-event-log *ngIf="user.id"></app-user-event-log>\n\n<div class="row">\n    <div class="col-xs-12">\n        <br/>\n    </div>\n</div>\n';
},830:function(t,e){t.exports='<div class="row">\n    <div class="col-xs-12">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <span>User Event Log</span>\n            </div>\n            <div class="panel-body">\n\n                <table class="table table-bordered table-hover">\n                    <thead>\n\n                        <tr>\n                            <th (click)="sortID()">\n                                ID\n                                <i class="fa" [ngClass]="{\'fa-sort-asc\': (sortDir == \'asc\'), \'fa-sort-desc\': (sortDir == \'desc\')}" aria-hidden="true"></i>\n                            </th>\n                            <th>\n                                Event Log\n                            </th>\n                            <th>\n                                Event Data\n                            </th>\n                            <th>\n                                Created At\n                            </th>\n                        </tr>\n                    </thead>\n\n                    <tbody *ngIf="wait"> \n                        <tr>\n                            <td colspan="7" align="center">\n                                <i class="fa fa-refresh fa-spin fa-2x fa-fw"></i> \n                            </td>\n                        </tr>\n                    </tbody>\n\n                    <tbody *ngIf="!wait && events.length <= 0">\n                        <tr>\n                            <td colspan="7" align="center">\n                                <alert type="warning">Sorry, no user events were found.</alert>\n                            </td>\n                        </tr>\n                    </tbody>\n\n                    <tbody *ngIf="!wait && events.length > 0">\n                        <tr class="user-events" *ngFor="let event of events">\n                            <td> {{event.id}} </td>\n                            <td> {{event.event}} </td>\n                            <td> {{event.event_data|json}} </td>\n                            <td> {{event.created_at}} </td>\n                        </tr>\n                    </tbody>\n\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n'},831:function(t,e){t.exports='<div class="row">\n    <div class="col-xs-4">\n        <button class="btn btn-info btn-sm" routerLink="/user/">Create a New User</button>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <br />\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table class="table table-bordered table-hover"> \n            <thead> \n                <tr> \n                    <th (click)="sort(\'id\')">\n                        ID \n                        <i *ngIf="sortCol == \'id\'" class="fa" [ngClass]="{\'fa-sort-asc\': (sortDir == \'asc\'), \'fa-sort-desc\': (sortDir == \'desc\')}" aria-hidden="true"></i>\n                    </th> \n                    <th (click)="sort(\'name\')">\n                        User Name\n                        <i *ngIf="sortCol == \'name\'" class="fa" [ngClass]="{\'fa-sort-asc\': (sortDir == \'asc\'), \'fa-sort-desc\': (sortDir == \'desc\')}" aria-hidden="true"></i>\n                    </th> \n                    <th>\n                        Role\n                    </th> \n                    <th>\n                        Last Login\n                    </th> \n                    <th>\n                        Joined\n                    </th> \n                    <th>Edit</th> \n                    <th>Delete</th> \n                </tr> \n            </thead> \n\n            <tbody *ngIf="wait"> \n                <tr>\n                    <td colspan="7" align="center">\n                        <i class="fa fa-refresh fa-spin fa-2x fa-fw"></i> \n                    </td>\n                </tr>\n            </tbody> \n\n            <tbody *ngIf="!wait && error"> \n                <tr>\n                    <td colspan="7" align="center">\n                        <alert type="warning">{{ error }}</alert>\n                    </td>\n                </tr>\n            </tbody> \n\n            <tbody *ngIf="!wait && !error && users.length < 1"> \n                <tr>\n                    <td colspan="7" align="center">\n                        <alert type="warning">Sorry, no users were found. Please try again.</alert>\n                    </td>\n                </tr>\n            </tbody> \n\n            <tbody *ngIf="!wait && !error && users.length > 0"> \n                <tr *ngFor="let user of users; let index = index"> \n                    <th scope="row">{{ user.id }}</th> \n                    <td class="user_name">{{ user.name }}</td> \n                    <td class="user_role_name">{{ user.role.name }}</td> \n                    <td class="user_last_login">{{ user.last_login }}</td> \n                    <td class="user_joined">{{ user.joined }}</td> \n                    <td class="user_edit"><a routerLink="/user/{{ user.id }}">Edit</a></td> \n                    <td class="user_delete"><button type="button" class="btn btn-danger" (click)="clickDelete(user.id)">Delete</button></td> \n                </tr> \n            </tbody> \n        </table>\n    </div>\n</div>\n<div class="row paging" *ngIf="total">\n    <div class="col-xs-4">\n\n        <nav aria-label="Page navigation">\n          <ul class="pagination pagination-sm">\n\n            <li *ngIf="(currentPage > 1)">\n              <a (click)="clickPrev()" aria-label="Previous">\n                <span aria-hidden="true">&laquo;</span>\n              </a>\n            </li>\n\n            <li \n                *ngFor="let page of pages; let index = index"\n                 [ngClass]="{\'active\': (page == currentPage)}"\n                >\n                <a (click)="clickPage(page)">{{ page }}</a>\n            </li>\n\n            <li *ngIf="(currentPage < getPageCount())">\n              <a (click)="clickNext()" aria-label="Next">\n                <span aria-hidden="true">&raquo;</span>\n              </a>\n            </li>\n\n          </ul>\n        </nav>\n\n    </div>\n</div>\n\n<div bsModal #confirmDeleteModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">\n  <div class="modal-dialog modal-sm">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title pull-left">Delete?</h4>\n        <button type="button" class="close pull-right" aria-label="Close" (click)="cancelDelete()">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        <div class="row">\n            <div class="col-xs-12">\n                <p>Are you sure you want to delete this user?</p>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-xs-6">\n                <button type="button" class="btn btn-warning" (click)="cancelDelete()">Cancel</button>\n            </div>\n            <div class="col-xs-6">\n                <button type="button" class="btn btn-danger" (click)="confirmDelete(selectedUser)">Delete</button>\n            </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},832:function(t,e){t.exports='<div class="row">\n    <div class="col-xs-12">\n        <br />\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-12">\n        <table class="table table-bordered table-hover"> \n            <thead>\n                <tr>\n                    <th (click)="sort(\'id\')">\n                        ID\n                        <i class="fa" [ngClass]="{\'fa-sort-asc\': (sortDir == \'asc\'), \'fa-sort-desc\': (sortDir == \'desc\')}" aria-hidden="true"></i>\n                    </th>\n                    <th (click)="sort(\'user_id\')">\n                        User ID\n                        <i class="fa" [ngClass]="{\'fa-sort-asc\': (sortDir == \'asc\'), \'fa-sort-desc\': (sortDir == \'desc\')}" aria-hidden="true"></i>\n                    </th>\n                    <th>\n                        Event Log\n                    </th>\n                    <th>\n                        Event Data\n                    </th>\n                    <th (click)="sort(\'created_at\')">\n                        Created At\n                        <i class="fa" [ngClass]="{\'fa-sort-asc\': (sortDir == \'asc\'), \'fa-sort-desc\': (sortDir == \'desc\')}" aria-hidden="true"></i>\n                    </th>\n                </tr>\n            </thead>\n\n            <tbody *ngIf="wait"> \n                <tr>\n                    <td colspan="7" align="center">\n                        <i class="fa fa-refresh fa-spin fa-2x fa-fw"></i> \n                    </td>\n                </tr>\n            </tbody>\n\n            <tbody *ngIf="!wait && events.length <= 0">\n                <tr>\n                    <td colspan="7" align="center">\n                        <alert type="warning">Sorry, no user events were found.</alert>\n                    </td>\n                </tr>\n            </tbody>\n\n            <tbody *ngIf="!wait && events.length > 0">\n                <tr class="users-events" *ngFor="let event of events">\n                    <td> {{event.id}} </td>\n                    <td> {{event.user_id}} </td>\n                    <td> {{event.event}} </td>\n                    <td> {{event.event_data|json}} </td>\n                    <td> {{event.created_at}} </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="row paging" *ngIf="eventsTotal">\n    <div class="col-xs-4">\n\n        <nav aria-label="Page navigation">\n          <ul class="pagination pagination-sm">\n\n            <li *ngIf="(currentPage > 1)">\n              <a (click)="clickPrev()" aria-label="Previous">\n                <span aria-hidden="true">&laquo;</span>\n              </a>\n            </li>\n\n            <li \n                *ngFor="let page of pages"\n                 [ngClass]="{\'active\': (page == currentPage)}"\n                >\n                <a (click)="clickPage(page)">{{ page }}</a>\n            </li>\n\n            <li *ngIf="(currentPage < getPageCount())">\n              <a (click)="clickNext()" aria-label="Next">\n                <span aria-hidden="true">&raquo;</span>\n              </a>\n            </li>\n\n          </ul>\n        </nav>\n\n    </div>\n</div>'},93:function(t,e,n){"use strict";var r=n(0),s=n(238),o=n(290),i=(n.n(o),n(174));n.d(e,"a",function(){return l});var a=this&&this.__decorate||function(t,e,n,r){var s,o=arguments.length,i=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(i=(o<3?s(i):o>3?s(e,n,i):s(e,n))||i);return o>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e){this.http=t,this.authService=e,this.listUrl="/ajax/erdiko/users/admin/list",this.userUrl="/ajax/erdiko/users/admin/retrieve",this.updateUrl="/ajax/erdiko/users/admin/update",this.createUrl="/ajax/erdiko/users/admin/create",this.deleteUrl="/ajax/erdiko/users/admin/delete",this.changePassUrl="/ajax/erdiko/users/admin/changepass",this.userEventUrl="/ajax/erdiko/users/admin/eventlogs",this.dataStore={},this._users$=new o.BehaviorSubject(null),this._total$=new o.BehaviorSubject(null),this._events$=new o.BehaviorSubject(null),this._eventsTotal$=new o.BehaviorSubject(null),this._baseUrl="",window.location&&"localhost"==window.location.hostname&&(this._baseUrl="http://docker.local:8088")}return Object.defineProperty(t.prototype,"users$",{get:function(){return this._users$.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"total$",{get:function(){return this._total$.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events$",{get:function(){return this._events$.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventsTotal$",{get:function(){return this._eventsTotal$.asObservable()},enumerable:!0,configurable:!0}),t.prototype._getHeaderOptions=function(){var t=new s.a({"Content-Type":"application/json",Authorization:"Bearer "+this.authService.token}),e=new s.b({headers:t});return e},t.prototype.getUsers=function(t,e,n,r){var s=this,o=this._baseUrl+this.listUrl;t&&(o+="?pagesize="+t),e&&(o+="&page="+e),n&&(o+="&sort="+n),r&&(o+="&direction="+r);var i=this._getHeaderOptions();return this.http.get(o,i).map(function(t){return t.json()}).subscribe(function(t){s.dataStore.users=[],s.dataStore.total=0,1==t.body.success&&(s.dataStore.users=t.body.users.users,s.dataStore.total=t.body.users.total),s._users$.next(s.dataStore.users),s._total$.next(s.dataStore.total)},function(t){console.error("Error retrieving users!",o,t),s._users$.next([]),s._total$.next(0)})},t.prototype.getUser=function(t){var e=this._baseUrl+this.userUrl+"?id="+t,n=this._getHeaderOptions();return this.http.get(e,n).toPromise().then(function(t){return t.json().body.user}).catch(this.handleError)},t.prototype.updateUser=function(t){var e=JSON.stringify(t),n=this._getHeaderOptions(),r=this._baseUrl+this.updateUrl;return this.http.post(r,e,n).toPromise().then(function(t){return t.json().body}).catch(this.handleError)},t.prototype.createUser=function(t){var e=JSON.stringify(t),n=this._getHeaderOptions(),r=this._baseUrl+this.createUrl;return this.http.post(r,e,n).toPromise().then(function(t){return t.json().body}).catch(this.handleError)},t.prototype.deleteUser=function(t){var e=JSON.stringify({id:t}),n=this._getHeaderOptions(),r=this._baseUrl+this.deleteUrl;return this.http.post(r,e,n).toPromise().then(function(t){return t.json().body}).catch(this.handleError)},t.prototype.changePassword=function(t,e){var n=JSON.stringify({id:t,newpass:e}),r=this._getHeaderOptions(),s=this._baseUrl+this.changePassUrl;return this.http.post(s,n,r).toPromise().then(function(t){return t.json().body}).catch(this.handleError)},t.prototype.getUsersEvents=function(t,e,n,r,s){var o=this,i=this._baseUrl+this.userEventUrl+"?";t&&(i+="user_id="+t+"&"),e&&(i+="pagesize="+e+"&"),n&&(i+="page="+n+"&"),r&&(i+="sort="+r+"&"),s&&(i+="direction="+s);var a=this._getHeaderOptions();return this.http.get(i,a).map(function(t){return t.json()}).subscribe(function(t){o.dataStore.events=[],o.dataStore.eventsTotal=0,1==t.body.success&&(o.dataStore.events=t.body.logs,o.dataStore.eventsTotal=t.body.total),o._events$.next(o.dataStore.events),o._eventsTotal$.next(o.dataStore.eventsTotal)},function(t){console.error("Error retrieving user event logs!",i,t),o._events$.next([]),o._events$.next(0)})},t.prototype.handleError=function(t){return Promise.reject(t.message||t)},t=a([n.i(r.Injectable)(),c("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.c&&s.c)&&e||Object,"function"==typeof(l="undefined"!=typeof i.a&&i.a)&&l||Object])],t);var e,l}()}},[1094]);
//# sourceMappingURL=main.42e077f1ad1d308d79c6.bundle.map